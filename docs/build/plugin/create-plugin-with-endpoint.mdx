---
id: create-plugin-2
title: Add a new endpoint
---

# Part 2: Add a new endpoint

Let's add a new endpoint to our plugin that will display a message when called.
Prerequisite: you should have completed [Part 1](./create-basic-plugin.mdx).

## Define your endpoint

Add a new endpoint to the swagger file:

```yaml
/api/hello:
  put:
    operationId: hello
    parameters:
      - in: query
        name: name
        type: string
        description: the name of the person to be greeted.
    produces:
      - application/json
    responses:
      "200":
        description: Greeting content.
        schema:
          type: object
          required:
            - message
          properties:
            message:
              description: Greeting message.
              type: string
              x-nullable: false
      "500":
        description: Internal Server Error - The server has encountered a situation it does not know how to handle.
```

## Add a handler

Add a handler for the new endpoint in the `cmd/station-massa-hello-world-server/station-massa-hello-world.go` file:

```go
package api

import (
    "fmt"

    "github.com/go-openapi/runtime/middleware"
    "github.com/my-username/station-massa-hello-world/api/server/restapi/operations"
)

func Hello(params operations.HelloParams) middleware.Responder {
    target := "World"
    if params.Name != nil { // takes the name of the person to be greeted from the query parameters
        target = *params.Name
    }

    return operations.NewHelloOK().WithPayload( // returns a 200 OK response with the greeting
        &operations.HelloOKBody{Message: fmt.Sprintf("Hello, %s!", target)},
    )
}
```

## Register the handler

In the `initializeAPI` function, register the handler to the endpoint:

```go
pluginAPI.HelloHandler = operations.HelloHandlerFunc(api.Hello)
```

## Test the endpoint

Reinstall the plugin and restart Massa Station. You can follow the same steps as in [Part 1](./create-basic-plugin.mdx).

```bash
curl -X PUT "http://station.massa/plugin/my-name/station-massa-hello-world/api/hello?name=John" -H  "accept: application/json"
```

- you should see the following output:

```json
{ "message": "Hello, John!" }
```
