"use strict";(self.webpackChunkdocu_dev=self.webpackChunkdocu_dev||[]).push([[4118],{5680:(e,t,n)=>{n.d(t,{xA:()=>u,yg:()=>y});var a=n(6540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=p(n),m=r,y=c["".concat(l,".").concat(m)]||c[m]||d[m]||o;return n?a.createElement(y,i(i({ref:t},u),{},{components:n})):a.createElement(y,i({ref:t},u))}));function y(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4512:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var a=n(8168),r=(n(6540),n(5680));const o={id:"operation",sidebar_label:"Operation"},i="Operation",s={unversionedId:"build/web3/operation",id:"build/web3/operation",title:"Operation",description:"The Operation object is returned when sending an operation to the Massa blockchain. It contains a variety of helper methods to check the status of the operation, wait for its execution, and retrieve associated events.",source:"@site/docs/build/web3/operation.md",sourceDirName:"build/web3",slug:"/build/web3/operation",permalink:"/docs/build/web3/operation",draft:!1,editUrl:"https://github.com/massalabs/docs/tree/main/docs/build/web3/operation.md",tags:[],version:"current",lastUpdatedBy:"BenRey",lastUpdatedAt:1724067773,formattedLastUpdatedAt:"Aug 19, 2024",frontMatter:{id:"operation",sidebar_label:"Operation"},sidebar:"buildSidebar",previous:{title:"Wallet",permalink:"/docs/build/web3/wallet"},next:{title:"Introduction",permalink:"/docs/build/web3/contracts-wrappers/contract-wrappers-intro"}},l={},p=[{value:"Usage Example",id:"usage-example",level:2},{value:"Methods",id:"methods",level:2}],u={toc:p},c="wrapper";function d(e){let{components:t,...n}=e;return(0,r.yg)(c,(0,a.A)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"operation"},"Operation"),(0,r.yg)("p",null,"The Operation object is returned when sending an operation to the Massa blockchain. It contains a variety of helper methods to check the status of the operation, wait for its execution, and retrieve associated events."),(0,r.yg)("h2",{id:"usage-example"},"Usage Example"),(0,r.yg)("p",null,"Here's a basic example of how to use the Operation object:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-typescript"},'import { Provider, Operation, OperationStatus } from "@massalabs/massa-web3";\n\n// Here we assume that \'provider\' is an instance of Provider\nconst operation = await provider.callSC({\n  func: targetFunction,\n  target: targetAddress,\n  caller: callerAddress,\n  parameter,\n  coins,\n  fee,\n});\n\nconst speculativeStatus = await operation.waitSpeculativeExecution();\nconsole.log("Speculative status:", speculativeStatus);\n\nif (status === OperationStatus.SpeculativeSuccess) {\n  console.log("Operation Success");\n}\n\nconst speculativeEvents = await operation.getSpeculativeEvents();\nconsole.log("Speculative events:", speculativeEvents);\n\nconst finalStatus = await operation.waitFinalExecution();\nconsole.log("Final status:", finalStatus);\n\nconst finalEvents = await operation.getFinalEvents();\nconsole.log("Final events:", finalEvents);\n')),(0,r.yg)("p",null,"This example demonstrates how to create an Operation object, wait for its execution (both speculative and final) and retrieve events."),(0,r.yg)("p",null,"Remember to handle errors appropriately in your actual implementation, as blockchain operations can fail due to various reasons such as network issues or execution errors."),(0,r.yg)("h2",{id:"methods"},"Methods"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-typescript"},"async getStatus(): Promise<OperationStatus>\n")),(0,r.yg)("p",null,"Gets the current status of the operation."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Returns: A Promise that resolves to the OperationStatus of the operation.")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-typescript"},"async waitSpeculativeExecution(timeout?: number, period?: number): Promise<OperationStatus>\n")),(0,r.yg)("p",null,"Waits for the operation to be included in a block (speculative execution)."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"timeout")," (optional): The maximum time to wait (default: 60000ms)."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"period")," (optional): The time interval to check the status (default: 500ms)."),(0,r.yg)("li",{parentName:"ul"},"Returns: A Promise that resolves to the OperationStatus or NotFound if the timeout is reached.")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-typescript"},"async waitFinalExecution(timeout?: number, period?: number): Promise<OperationStatus>\n")),(0,r.yg)("p",null,"Waits for the block containing the operation to be final."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"timeout")," (optional): The maximum time to wait (default: 60000ms)."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"period")," (optional): The time interval to check the status (default: 500ms)."),(0,r.yg)("li",{parentName:"ul"},"Returns: A Promise that resolves to the OperationStatus or NotFound if the timeout is reached.")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-typescript"},"async getFinalEvents(): Promise<SCEvent[]>\n")),(0,r.yg)("p",null,"Gets the events of the operation once the block reaches the final state."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Returns: A Promise that resolves to an array of SCEvent objects."),(0,r.yg)("li",{parentName:"ul"},"Throws an error if the operation is not found.")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-typescript"},"async getSpeculativeEvents(): Promise<SCEvent[]>\n")),(0,r.yg)("p",null,"Gets the events of the speculative execution of the operation."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Returns: A Promise that resolves to an array of SCEvent objects."),(0,r.yg)("li",{parentName:"ul"},"Throws an error if the operation is not found.")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-typescript"},"async getDeployedAddress(waitFinal = false): Promise<string>\n")),(0,r.yg)("p",null,"Gets the deployed address of a smart contract operation."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"waitFinal")," (optional): If true, waits for final execution; otherwise, uses speculative execution (default: false)."),(0,r.yg)("li",{parentName:"ul"},"Returns: A Promise that resolves to the deployed contract address."),(0,r.yg)("li",{parentName:"ul"},"Throws an error if no events are received or if there's an execution error.")))}d.isMDXComponent=!0}}]);