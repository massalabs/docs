"use strict";(self.webpackChunkdocu_dev=self.webpackChunkdocu_dev||[]).push([[3746],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>b});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),d=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},c=function(e){var t=d(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=d(a),p=r,b=u["".concat(l,".").concat(p)]||u[p]||m[p]||i;return a?n.createElement(b,o(o({ref:t},c),{},{components:a})):n.createElement(b,o({ref:t},c))}));function b(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:r,o[1]=s;for(var d=2;d<i;d++)o[d]=a[d];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}p.displayName="MDXCreateElement"},5542:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var n=a(7462),r=(a(7294),a(3905));const i={title:"Guaranteed Website Self-Containment"},o=void 0,s={unversionedId:"deweb/immutability/guaranteed-website-self-containment",id:"deweb/immutability/guaranteed-website-self-containment",title:"Guaranteed Website Self-Containment",description:"Protecting against the website asking the user's browser to load external, non-immutable data when displayed is achieved by setting specific HTTP headers that are part of the website data stored on-chain. When the website is loaded by a user from a provider, the provider forwards those HTTP headers to the user's browser to tell the browser to refuse any requests by the website to load resources coming from different domains.",source:"@site/docs/deweb/immutability/guaranteed-website-self-containment.mdx",sourceDirName:"deweb/immutability",slug:"/deweb/immutability/guaranteed-website-self-containment",permalink:"/docs/deweb/immutability/guaranteed-website-self-containment",draft:!1,editUrl:"https://github.com/massalabs/docs/tree/main/docs/deweb/immutability/guaranteed-website-self-containment.mdx",tags:[],version:"current",lastUpdatedBy:"Peterjah",lastUpdatedAt:1752152984,formattedLastUpdatedAt:"Jul 10, 2025",frontMatter:{title:"Guaranteed Website Self-Containment"},sidebar:"massaDeWebSidebar",previous:{title:"Website data immutability",permalink:"/docs/deweb/immutability/Website-data-immutability"},next:{title:"Continuous Integration with GitHub Actions",permalink:"/docs/deweb/ci/"}},l={},d=[],c={toc:d},u="wrapper";function m(e){let{components:t,...a}=e;return(0,r.kt)(u,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Protecting against the website asking the user's browser to load external, non-immutable data when displayed is achieved by setting specific HTTP headers that are part of the website data stored on-chain. When the website is loaded by a user from a provider, the provider forwards those HTTP headers to the user's browser to tell the browser to refuse any requests by the website to load resources coming from different domains."),(0,r.kt)("p",null,"To prevent the browser from loading resources coming from other sources, you can use the ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/CSP"},"Content Security Policy")," header.\nYou can add this header at the website-level: ",(0,r.kt)("inlineCode",{parentName:"p"},"Content-Security-Policy: default-src 'self';")),(0,r.kt)("p",null,"To add headers to a website, you have to use metadatas as explained ",(0,r.kt)("a",{parentName:"p",href:"/docs/deweb/cli/metadatas#http-headers"},"here"),".\nIn our case, you can add the content security policy header by adding the following metadata: "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Key: ",(0,r.kt)("inlineCode",{parentName:"li"},"http-header:Content-Security-Policy")," "),(0,r.kt)("li",{parentName:"ul"},"Value: ",(0,r.kt)("inlineCode",{parentName:"li"},"default-src 'self'"))),(0,r.kt)("p",null,"To add a metadata to a website, you have two options:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"via config file: in the deweb_cli_config.json file, add a metadatas field as explained in ",(0,r.kt)("a",{parentName:"li",href:"/docs/deweb/cli/config"},"cli config"),":")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'"metadatas": {\n    "http-header:Content-Security-Policy": "default-src \'self\'"\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"directly in command line as explained in ",(0,r.kt)("a",{parentName:"li",href:"/docs/deweb/cli/metadatas"},"cli metadata"),":")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'npx @massalabs/deweb-cli metadata --add "http-header:Content-Security-Policy",default-src \'self\'" <website_contract_address>\n')),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Currently guaranteed website self-containment cannot be achieved via ",(0,r.kt)("strong",{parentName:"p"},"Easy Uploader")," because it doesn't handle custom metadatas.")),(0,r.kt)("admonition",{type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"As these directives are part of the website data itself, you cannot set them if the website data has already been made immutable. So if you want to apply both data immutability (see above) and self-containment, you must first ensure self-containment before applying data immutability.")),(0,r.kt)("admonition",{type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"Some sites depend on external resources and might break under this constraint.")))}m.isMDXComponent=!0}}]);