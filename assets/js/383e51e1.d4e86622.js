"use strict";(self.webpackChunkdocu_dev=self.webpackChunkdocu_dev||[]).push([[4326],{8819:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var t=s(4848),o=s(8453);const i={id:"grpc",sidebar_label:"gRPC"},r="Massa gRPC API",a={id:"build/api/grpc",title:"Massa gRPC API",description:"The gRPC API allows you to communicate with the Massa blockchain.",source:"@site/docs/build/api/grpc.mdx",sourceDirName:"build/api",slug:"/build/api/grpc",permalink:"/docs/build/api/grpc",draft:!1,unlisted:!1,editUrl:"https://github.com/massalabs/docs/tree/main/docs/build/api/grpc.mdx",tags:[],version:"current",lastUpdatedBy:"Damir Vodenicarevic",lastUpdatedAt:1723704495e3,frontMatter:{id:"grpc",sidebar_label:"gRPC"},sidebar:"buildSidebar",previous:{title:"JsonRPC",permalink:"/docs/build/api/jsonrpc"},next:{title:"Standards",permalink:"/docs/build/standards"}},l={},c=[{value:"Documentation",id:"documentation",level:2},{value:"Integrations",id:"integrations",level:2},{value:"Code generation",id:"code-generation",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"massa-grpc-api",children:"Massa gRPC API"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.a,{href:"https://grpc.io/",children:"gRPC"})," API allows you to communicate with the Massa blockchain."]}),"\n",(0,t.jsx)(n.p,{children:"The Massa gRPC API is split into two parts:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Public API"}),": used for blockchain interactions. Default port:\n33037 e.g. ",(0,t.jsx)(n.code,{children:"grpc://localhost:33037"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Private API"}),": used for node management. Default port: 33038 e.g.\n",(0,t.jsx)(n.code,{children:"grpc://localhost:33038"})]}),"\n"]}),"\n",(0,t.jsxs)(n.admonition,{type:"info",children:[(0,t.jsxs)(n.p,{children:["To enable events (blocks, endorsements, operations...) broadcast via gRPC streams in your Massa node, add or edit the file\n",(0,t.jsx)(n.code,{children:"massa-node/config/config.toml"})," with the following content:"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:"[api]\n   # whether to broadcast for blocks, endorsement and operations\n   enable_broadcast = true\n"})})]}),"\n",(0,t.jsx)(n.h2,{id:"documentation",children:"Documentation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["gRPC ",(0,t.jsx)(n.strong,{children:"API"})," ",(0,t.jsx)(n.a,{href:"https://htmlpreview.github.io/?https://github.com/massalabs/massa-proto/blob/main/doc/api.html",children:"documentation"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["gRPC ",(0,t.jsx)(n.strong,{children:"Commons"})," ",(0,t.jsx)(n.a,{href:"https://htmlpreview.github.io/?https://github.com/massalabs/massa-proto/blob/main/doc/commons.html",children:"documentation"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["gRPC ",(0,t.jsx)(n.strong,{children:"API"})," ",(0,t.jsx)(n.a,{href:"https://github.com/massalabs/massa-proto/tree/main/proto/apis/massa/api/v1",children:"specification"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"integrations",children:"Integrations"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Postman"}),": You can find our Massa Postman collections on our official\n",(0,t.jsx)(n.a,{href:"https://www.postman.com/massalabs",children:"workspace"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Massa proto rs"}),": is a Rust library which contains generated code from Massa protobuf files. See\n",(0,t.jsx)(n.a,{href:"https://github.com/massalabs/massa-proto-rs",children:"massa-proto-rs"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"code-generation",children:"Code generation"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Step 1: Clone ",(0,t.jsx)(n.code,{children:"massa-proto"})," repository"]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"git clone -b MASSA_PROTO_TAG https://github.com/massalabs/massa-proto.git --depth 1\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["If you are using an older version of the Massa node, please use the tag version or commit hash corresponding to your node version.\nFind all ",(0,t.jsx)(n.code,{children:"massa-proto"})," tags ",(0,t.jsx)(n.a,{href:"https://github.com/massalabs/massa-proto/tags",children:"here"}),"."]})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Step 2: Install Buf CLI"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Download the latest version of Buf CLI from the ",(0,t.jsx)(n.a,{href:"https://docs.buf.build/installation",children:"official website"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Extract the downloaded file to a folder on your computer."}),"\n",(0,t.jsx)(n.li,{children:"Add the buf binary to your system PATH environment variable."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Step 3: Set up Buf"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Add the following content to ",(0,t.jsx)(n.code,{children:"buf.work.yml"}),":"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"version: v1\ndirectories:\n  - proto/apis\n  - proto/commons\n  - proto/third_party\n"})}),"\n",(0,t.jsx)(n.p,{children:"By specifying the directories in the configuration file, Buf knows which"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)("span",{class:"title-ref",children:".proto"})," files to include in the build process."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Create a file called ",(0,t.jsx)(n.code,{children:"buf.gen.yml"})," and add the following content:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"version: v1\nmanaged:\n  enabled: true\nplugins:\n  - remote: buf.build/community/timostamm-protobuf-ts:v2.9.0\n    out: gen/ts\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The configuration uses the official ",(0,t.jsx)(n.a,{href:"https://buf.build/community/timostamm-protobuf-ts",children:"timostamm-protobuf-ts"}),"\nplugin to generate gRPC client and classes in TypeScript."]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["For other languages check the complete list of ",(0,t.jsx)(n.a,{href:"https://buf.build/plugins",children:"official Buf plugins"}),"."]})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Step 4: Generate gRPC client/classes in TypeScript"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Launch the code generation:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"buf generate\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"Install the required dependencies for the generated code to your project:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"npm install @protobuf-ts/runtime@^2.9.0 @protobuf-ts/runtime-rpc@^2.9.0\n"})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var t=s(6540);const o={},i=t.createContext(o);function r(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);