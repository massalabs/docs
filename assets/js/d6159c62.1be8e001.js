"use strict";(self.webpackChunkdocu_dev=self.webpackChunkdocu_dev||[]).push([[36],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>b});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),d=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=d(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=d(a),c=r,b=u["".concat(l,".").concat(c)]||u[c]||m[c]||i;return a?n.createElement(b,o(o({ref:t},p),{},{components:a})):n.createElement(b,o({ref:t},p))}));function b(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:r,o[1]=s;for(var d=2;d<i;d++)o[d]=a[d];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},4290:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var n=a(7462),r=(a(7294),a(3905));const i={id:"deweb-link",sidebar_label:"deweb link"},o="Deweb Linking",s={unversionedId:"build/massa-web3/deweb/deweb-link",id:"build/massa-web3/deweb/deweb-link",title:"Deweb Linking",description:"The Problem",source:"@site/docs/build/massa-web3/deweb/deweb-link.md",sourceDirName:"build/massa-web3/deweb",slug:"/build/massa-web3/deweb/deweb-link",permalink:"/docs/build/massa-web3/deweb/deweb-link",draft:!1,editUrl:"https://github.com/massalabs/docs/tree/main/docs/build/massa-web3/deweb/deweb-link.md",tags:[],version:"current",lastUpdatedBy:"Damir Vodenicarevic",lastUpdatedAt:1760111013,formattedLastUpdatedAt:"Oct 10, 2025",frontMatter:{id:"deweb-link",sidebar_label:"deweb link"},sidebar:"buildSidebar",previous:{title:"Overview",permalink:"/docs/build/massa-web3/deweb/massa-web3-deweb-overview"},next:{title:"Wallet",permalink:"/docs/build/wallet-provider/wallet"}},l={},d=[{value:"The Problem",id:"the-problem",level:2},{value:"Solution",id:"solution",level:2},{value:"resolveDeweb function",id:"resolvedeweb-function",level:3},{value:"redirection page",id:"redirection-page",level:3},{value:"useResolveDeweb",id:"useresolvedeweb",level:3}],p={toc:d},u="wrapper";function m(e){let{components:t,...i}=e;return(0,r.kt)(u,(0,n.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"deweb-linking"},"Deweb Linking"),(0,r.kt)("h2",{id:"the-problem"},"The Problem"),(0,r.kt)("p",null,"In web2, you can link site A to another site B by displaying the URL of site B in site A.",(0,r.kt)("br",{parentName:"p"}),"\n","In web3, displaying a link to a decentralized website is not so straightforward.\nA deweb website is identified by one (or several) MNS (Massa Name System) domain but you can't just display it inside a ",(0,r.kt)("inlineCode",{parentName:"p"},"<a>")," tag because most browsers don't handle MNS.",(0,r.kt)("br",{parentName:"p"}),"\n","To access a deweb site, you have to incorporate its MNS as a subdomain of the URL of a ",(0,r.kt)("a",{parentName:"p",href:"/docs/deweb/provider/setup-public-instance"},"deweb provider"),". But which provider should you choose when you want to create a link to a deweb site ?",(0,r.kt)("br",{parentName:"p"}),"\n","The usual way is to hardcode the provider into a URL like this: ",(0,r.kt)("inlineCode",{parentName:"p"},"<mns>.<provider domain name>"),"\nThe drawback of this approach is that you force the user to use a specific provider. This causes the following issues:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Add centralization"),(0,r.kt)("li",{parentName:"ul"},"If the provider is down, the link is dead"),(0,r.kt)("li",{parentName:"ul"},"If the user is running his own provider (see ",(0,r.kt)("a",{parentName:"li",href:"/docs/learn/decentralized-web"},"here")," and ",(0,r.kt)("a",{parentName:"li",href:"/docs/deweb/local-server-config/setup-local-server"},"here"),") they can't use it to access the linked site.")),(0,r.kt)("h2",{id:"solution"},"Solution"),(0,r.kt)("h3",{id:"resolvedeweb-function"},"resolveDeweb function"),(0,r.kt)("p",null,"Massa-web3 provides a function that abstracts provider selection logic:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"async function resolveDeweb(uri: string, chainId = CHAIN_ID.Mainnet): Promise<string>\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'uri: The mns domain of the deweb site. Must be suffixed by ".massa" e.g., "dws.massa", "mip.massa"...'),(0,r.kt)("li",{parentName:"ul"},"chainId: Optional parameter to specify the network (mainnet, buildnet) on which the website is stored. Default: mainnet."),(0,r.kt)("li",{parentName:"ul"},"Returns: A promise that resolves to an operational URL containing a provider and the mns URI as subdomain. If no providers have been found, return a fallback URL that redirects to a page allowing the user to choose a public provider. ")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"This function only works in a browser")),(0,r.kt)("p",null,"For example, if you want to put a link to ",(0,r.kt)("a",{parentName:"p",href:"https://syntra.massa.network/"},"Syntra")," (onchain token scheduling Dapp powered by ",(0,r.kt)("a",{parentName:"p",href:"/docs/learn/asc/intro"},"autonomous smart contracts"),") decentralized website in your website, you can do something like that:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<a href={resolveDeweb("syntra.massa")}>syntra.massa</a>\n')),(0,r.kt)("p",null,"Under the hood, ",(0,r.kt)("inlineCode",{parentName:"p"},"resolveDeweb")," function does the following:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Checks if the current browser natively supports Massa name system. If so, it just returns the URI as passed in parameter:",(0,r.kt)("br",{parentName:"li"}),'"',(0,r.kt)("inlineCode",{parentName:"li"},"http://<mns domain>.massa/<path and query params>"),'".',(0,r.kt)("br",{parentName:"li"}),"For now, the only browser that supports MNS is ",(0,r.kt)("a",{parentName:"li",href:"https://decentr.net"},"Decentr"),", on Windows OS only."),(0,r.kt)("li",{parentName:"ul"},"If no native support, checks if the ",(0,r.kt)("a",{parentName:"li",href:"/docs/learn/decentralized-web"},"deweb provider plugin")," of  ",(0,r.kt)("a",{parentName:"li",href:"/docs/massaStation/home"},"Massa Station")," is running. If so, it will return",(0,r.kt)("br",{parentName:"li"}),'"',(0,r.kt)("inlineCode",{parentName:"li"},"http://<mns domain>.localhost:<deweb plugin port>/<path and query params>"),'".',(0,r.kt)("br",{parentName:"li"}),"e.g. ",(0,r.kt)("em",{parentName:"li"},'"massexplo.massa/blocks"')," -> ",(0,r.kt)("em",{parentName:"li"},'"',(0,r.kt)("a",{parentName:"em",href:"http://massexplo.localhost:4242/blocks%22"},'http://massexplo.localhost:4242/blocks"'))," (the port is random)"),(0,r.kt)("li",{parentName:"ul"},"If no station deweb plugin is available, check if the user is running a ",(0,r.kt)("a",{parentName:"li",href:"/docs/deweb/local-server-config/setup-local-server"},"local deweb server"),". If so, return",(0,r.kt)("br",{parentName:"li"}),'"',(0,r.kt)("inlineCode",{parentName:"li"},"http://<mns domain>.localhost:8080/<path and query params"),'".',(0,r.kt)("br",{parentName:"li"}),"e.g. ",(0,r.kt)("em",{parentName:"li"},'"adm.massa/options/nodes"')," -> ",(0,r.kt)("em",{parentName:"li"},'"',(0,r.kt)("a",{parentName:"em",href:"http://adm.localhost:8080/options/nodes%22"},'http://adm.localhost:8080/options/nodes"'))),(0,r.kt)("li",{parentName:"ul"},"If no local deweb server is running, check if the current website, the one displaying the link, is served to the user by a deweb provider. If the website the user is currently visiting is a decentralized one, it means that it is served to him via a deweb provider. So we can use the same provider the user is currently using to serve the deweb website in the link. The function will thus return",(0,r.kt)("br",{parentName:"li"}),'"',(0,r.kt)("inlineCode",{parentName:"li"},"http://<mns domain>.<current provider domain>/<path and query params>"),'".',(0,r.kt)("br",{parentName:"li"}),"e.g. ",(0,r.kt)("em",{parentName:"li"},'"compound.massa/lend"')," -> ",(0,r.kt)("em",{parentName:"li"},'"',(0,r.kt)("a",{parentName:"em",href:"http://compound.massa.network/lend%22"},'http://compound.massa.network/lend"'))),(0,r.kt)("li",{parentName:"ul"},"If none of the previous providers are available, return a fallback URL : ")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"https://deweb.massa.network/deweb_redirect?chain_id=<chain id>&deweb_url=<mns domain>\n")),(0,r.kt)("p",null,"This fallback URL has two query parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"chain_id"),": the chain id used in the ",(0,r.kt)("inlineCode",{parentName:"li"},"resolveDeweb")," function"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"deweb_url"),": the URI passed as parameter to ",(0,r.kt)("inlineCode",{parentName:"li"},"resolveDeweb"))),(0,r.kt)("h3",{id:"redirection-page"},"redirection page"),(0,r.kt)("p",null,"The redirection page targeted by the fallback URL is hosted on ",(0,r.kt)("inlineCode",{parentName:"p"},"deweb.massa")," decentralized website.\nThe page helps the user to get a provider in two means:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"It allows the user to choose a public deweb provider among a community-maintained list. When the user clicks on the button, the deweb website required by the user is automatically opened in a new tab with the URL of the selected provider."),(0,r.kt)("li",{parentName:"ul"},"The page also suggests the user to access the deweb site by using their own deweb provider. The user is invited to download one of the following tools :",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"massa station deweb plugin"),(0,r.kt)("li",{parentName:"ul"},"decentr browser if the current OS is Windows"),(0,r.kt)("li",{parentName:"ul"},"run the provider server binary localy on the computer.")))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"redirection page",src:a(3172).Z,width:"1035",height:"900"})),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Public providers proposed on the page are not checked. Ensure you trust the provider's admin.  ")),(0,r.kt)("h3",{id:"useresolvedeweb"},"useResolveDeweb"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useResolveDeweb")," is a react hook available in Massalabs ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/massalabs/ui-kit"},"react ui kit")," react tool kit. It's a wrapper around ",(0,r.kt)("inlineCode",{parentName:"p"},"resolveDeweb")," function."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"function useResolveDeweb(Url: string, chainId?: bigint): {resolvedUrl: string, isLoading: boolean, error: string | null}\n")),(0,r.kt)("p",null,"Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'Url: the URL of the deweb site. The URL can be a mns domain with a deweb provider domain. The ".massa" suffix after the mns domain is not required, but the protocol prefix ("http://") does.'),(0,r.kt)("li",{parentName:"ul"},"chainId: Same as for ",(0,r.kt)("inlineCode",{parentName:"li"},"resolveDeweb"))),(0,r.kt)("p",null,"Result:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"resolvedUrl: the result returned by ",(0,r.kt)("inlineCode",{parentName:"li"},"resolveDeweb")," "),(0,r.kt)("li",{parentName:"ul"},"isLoading: Whether the URL creation process is pending or not"),(0,r.kt)("li",{parentName:"ul"},"error: eventual error of the process.")))}m.isMDXComponent=!0},3172:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/deweb_redirect_page-4b684ad45d6743d9e9faac83939ed1da.png"}}]);