"use strict";(self.webpackChunkdocu_dev=self.webpackChunkdocu_dev||[]).push([[6303],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>k});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=r.createContext({}),p=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,l=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),u=p(a),d=n,k=u["".concat(s,".").concat(d)]||u[d]||m[d]||l;return a?r.createElement(k,i(i({ref:t},c),{},{components:a})):r.createElement(k,i({ref:t},c))}));function k(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=a.length,i=new Array(l);i[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[u]="string"==typeof e?e:n,i[1]=o;for(var p=2;p<l;p++)i[p]=a[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}d.displayName="MDXCreateElement"},2586:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var r=a(7462),n=(a(7294),a(3905));const l={id:"provider",sidebar_label:"Provider",sidebar_position:3},i="Provider",o={unversionedId:"build/massa-web3/provider",id:"build/massa-web3/provider",title:"Provider",description:"A Provider is a fundamental object used to interact with the Massa blockchain. It provides methods for various blockchain operations, including balance retrieval, network information, signing data, and executing smart contract operations.",source:"@site/docs/build/massa-web3/provider.md",sourceDirName:"build/massa-web3",slug:"/build/massa-web3/provider",permalink:"/docs/build/massa-web3/provider",draft:!1,editUrl:"https://github.com/massalabs/docs/tree/main/docs/build/massa-web3/provider.md",tags:[],version:"current",lastUpdatedBy:"Pierre Seznec",lastUpdatedAt:1730216084,formattedLastUpdatedAt:"Oct 29, 2024",sidebarPosition:3,frontMatter:{id:"provider",sidebar_label:"Provider",sidebar_position:3},sidebar:"buildSidebar",previous:{title:"Prerequisites",permalink:"/docs/build/massa-web3/prerequisites"},next:{title:"Wallet",permalink:"/docs/build/massa-web3/wallet"}},s={},p=[{value:"Creating a Provider",id:"creating-a-provider",level:2},{value:"1. From a Wallet",id:"1-from-a-wallet",level:3},{value:"2. From a KeyPair or Environment Variable",id:"2-from-a-keypair-or-environment-variable",level:3},{value:"Provider Methods",id:"provider-methods",level:2}],c={toc:p},u="wrapper";function m(e){let{components:t,...a}=e;return(0,n.kt)(u,(0,r.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"provider"},"Provider"),(0,n.kt)("p",null,"A Provider is a fundamental object used to interact with the Massa blockchain. It provides methods for various blockchain operations, including balance retrieval, network information, signing data, and executing smart contract operations."),(0,n.kt)("p",null,"A Provider can be created from a KeyPair or accessed from a Wallet account. It can be used to sign transactions and interact with the blockchain."),(0,n.kt)("h2",{id:"creating-a-provider"},"Creating a Provider"),(0,n.kt)("p",null,"There are multiple ways to create a Provider, depending on your use case. Here are two common methods:"),(0,n.kt)("h3",{id:"1-from-a-wallet"},"1. From a Wallet"),(0,n.kt)("p",null,"In a browser environment, you can create a Provider from a Wallet. This is useful for dApps that interact with user wallets."),(0,n.kt)("p",null,"To use the Provider from a wallet you need two things:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"A wallet installed"),": It can be MassaStation, bearby or any other wallet that supports the Massa blockchain. See ",(0,n.kt)("a",{parentName:"p",href:"/docs/build/wallet/intro"},"wallet section"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"The wallet-provider package installed"),":"))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"npm install @massalabs/wallet-provider\nnpm install @massalabs/massa-web3\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},'import { getWallets } from "@massalabs/wallet-provider";\n\n// First we get the list of wallets installed\nconst walletList = await getWallets();\n\n// Then we find the wallet we want to use\nconst wallet = walletList.find(\n  (provider) => provider.name() === "MASSASTATION"\n);\n\nif (!wallet) {\n  console.log("No wallet found");\n  return;\n}\n\n// We get the accounts from the wallet\nconst accounts = await wallet?.accounts();\n\nif (accounts.length === 0) {\n  console.log("No accounts found");\n  return;\n}\n\n// We use the first account as the provider\nconst provider = accounts[0];\n')),(0,n.kt)("h3",{id:"2-from-a-keypair-or-environment-variable"},"2. From a KeyPair or Environment Variable"),(0,n.kt)("p",null,"For backend applications or when you have direct access to private keys, you can create a Provider from a KeyPair. This method is also useful when working with environment variables for increased security."),(0,n.kt)("p",null,"First you will need to install the ",(0,n.kt)("inlineCode",{parentName:"p"},"@massalabs/massa-web3")," package:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"npm install @massalabs/massa-web3\n")),(0,n.kt)("p",null,"Then you can create a Provider from a KeyPair in two ways:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"From a environment variable:"))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},'import { Account as KeyPair, Web3Provider } from "@massalabs/massa-web3";\n// Will use the environment variables at `PRIVATE_KEY` to create a KeyPair\n// but you can also pass the name of the env variable as a string\nconst keyPair = await KeyPair.fromEnv();\n// Will use the KeyPair to create a Provider\nconst provider = Web3Provider.buildnet(keyPair);\n')),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"From a generated KeyPair:"))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},'import { Account as KeyPair, Web3Provider } from "@massalabs/massa-web3";\n\n// Will create a new KeyPair\nconst keyPair = await KeyPair.generate();\n// Will use the KeyPair to create a Provider\nconst provider = Web3Provider.buildnet(keyPair);\n')),(0,n.kt)("h2",{id:"provider-methods"},"Provider Methods"),(0,n.kt)("p",null,"A Provider offers several methods to interact with the Massa blockchain. Here are the available methods:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"get address(): string\n")),(0,n.kt)("p",null,"Returns the address associated with the Provider."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"get accountName(): string\n")),(0,n.kt)("p",null,"Returns the name of the account associated with the Provider."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"get providerName(): string\n")),(0,n.kt)("p",null,"Returns the name of the Provider."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"balance(final: boolean): Promise<bigint>\n")),(0,n.kt)("p",null,"Retrieves the balance of the account."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"final"),": If true, returns the final (confirmed) balance. If false, returns the speculative (possibly unconfirmed) balance.")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"networkInfos(): Promise<Network>\n")),(0,n.kt)("p",null,"Retrieves information about the Massa network."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"sign(data: Buffer | Uint8Array | string): Promise<SignedData>\n")),(0,n.kt)("p",null,"Signs the provided data."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"data"),": The data to be signed.")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"buyRolls(amount: Mas, opts?: OperationOptions): Promise<Operation>\n")),(0,n.kt)("p",null,"Buys rolls (staking units) on the Massa blockchain."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"amount"),": The amount of MAS to spend on buying rolls."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"opts"),": Optional operation parameters.")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"sellRolls(amount: Mas, opts?: OperationOptions): Promise<Operation>\n")),(0,n.kt)("p",null,"Sells rolls (staking units) on the Massa blockchain."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"amount"),": The number of rolls to sell."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"opts"),": Optional operation parameters.")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"transfer(to: Address | string, amount: Mas, opts?: OperationOptions): Promise<Operation>\n")),(0,n.kt)("p",null,"Transfers MAS tokens to another address."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"to"),": The recipient's address."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"amount"),": The amount of MAS to transfer."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"opts"),": Optional operation parameters.")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"callSC(params: CallSCParams): Promise<Operation>\n")),(0,n.kt)("p",null,"Calls a smart contract function."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"params"),": Parameters for the smart contract call.")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"readSC(params: ReadSCParams): Promise<ReadSCData>\n")),(0,n.kt)("p",null,"Reads data from a smart contract without modifying its state."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"params"),": Parameters for reading from the smart contract.")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"deploySC(params: DeploySCParams): Promise<SmartContract>\n")),(0,n.kt)("p",null,"Deploys a smart contract to the Massa blockchain."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"params"),": Parameters for deploying the smart contract.")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"getOperationStatus(opId: string): Promise<OperationStatus>\n")),(0,n.kt)("p",null,"Retrieves the status of an operation."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"opId"),": The ID of the operation to check.")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-typescript"},"getEvents(filter: EventFilter): Promise<SCEvent[]>\n")),(0,n.kt)("p",null,"Retrieves events based on the provided filter."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"filter"),": Criteria for filtering events.")))}m.isMDXComponent=!0}}]);